<!DOCTYPE html>
<html>
  <head>
    <title>Weather or Not? | A simple weather application</title>
    <meta charset="utf-8" />
    <meta name="description" content="Get the current weather for any location.">
    <link rel="stylesheet" href="style.css" type="text/css" />
  </head>

  <body> 
    <div class="content">
        <h1>Weather or Not?</h1>
        <div class="locationForm">
          <input type="text" id="loc" name="location" placeholder="Enter a city. Press enter." autofocus autocomplete="off"/>
          <div>
            <button id="submit" onclick="getWeather()">Weather, please</button>
            <button id="not" onclick="getPun()">Not</button>
          </div>
        </div>
        <div class="results">
          <div id="temp"></div>
          <div id="lat"></div>
          <div id="long"></div>
        </div>
    </div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script type="text/javascript">
    var url = "http://api.openweathermap.org/data/2.5/weather?q=";

    $("#loc").keyup(function(event){
        if(event.keyCode == 13){
          $("#submit").click();
        }
    });

    function getWeather() {
      var city = $("#loc").val();
      $.getJSON(url + city, function(data) {
          console.log(data);
          var temp = kelvinToFahrenheit(data.main.temp).toFixed(1);
          $("#temp").html(temp + " &deg;F" );
          $("#lat").text("Lat: " + data.coord.lat);
          $("#long").text("Long: " + data.coord.lon);
      });
    };

    function kelvinToFahrenheit(temp) {
      return (1.8 * (temp - 273.15) + 32);
    };
    
    var puns;
    $.getJSON('puns.json', function(response) {
        puns = response;
        $(window).trigger('JSONready');
    });

    function getPun() {
      $("#lat").text(puns[Math.floor(Math.random() * puns.length)]);
    };

    $(window).on('JSONready', function() {
      for (var i = 0; i < puns.length; i++ ) {
        console.log(puns[i]);
      }
    });

  </script>
  </body>
</html>
